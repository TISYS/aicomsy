<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <template id="report_ncr_report">
        <t t-foreach="docs" t-as="o">
            <t t-call="web.basic_layout">
                <t t-set="company" t-value="o.company_id"/>
                <div class="header" style="border-bottom: 1px solid black;">
                    <div>
                        <div class="col-4">
                            <img t-if="company.logo" t-att-src="image_data_uri(company.logo)" style="max-height: 45px;"
                                 alt="Logo"/>
                        </div>
                        <address class="mb-0" t-field="company.partner_id"
                                 t-options='{"widget": "contact", "fields": ["address", "name"], "no_marker": True}'/>
                    </div>
                </div>
                <div class="page">
                    <div class="oe_structure"/>
                    <div class="row">
                        <div class="col-xs-8">
                            <tr>
                                <td width="10%">
                                    <p style="text-align:center;padding-top:10px;">
                                    </p>
                                </td>
                                <td width="60%">
                                    <table class=" table-borderless">
                                        <tr>
                                            <td colspan="3" class="text-center">
                                                <span style="font-size: 30px; font-weight: bold; display: block; margin-bottom: 10px; margin-right: 40px;"
                                                      t-field="o.name"/>
                                            </td>
                                            <td style="width: 45%;">
                                            </td>
                                            <td>
                                                <span style="font-size: 30px; font-weight: bold; display: block; margin-bottom: 10px; margin-right: 40px;">
                                                    <strong>Status</strong>
                                                </span>
                                            </td>
                                            <td>
                                                <span t-field="o.state" style="font-size: 25px;"/>
                                            </td>
                                        </tr>
                                    </table>
                                    <table class="table table-condensed"
                                           style="border: 1px solid black !important; margin-bottom: 30px; margin-top: 30px;">
                                        <tr>
                                            <td style=" width: 30%; background-color: lightblue;">
                                                <span style=" margin-bottom: 10px; margin-right: 10px;">
                                                    <strong>NCR Type</strong>
                                                </span>
                                            </td>
                                            <td style=" width: 20%;">
                                                <span t-field="o.ncr_type_id"/>
                                            </td>
                                            <td style=" width: 30%; background-color: lightblue;">
                                                <span style=" margin-bottom: 10px; margin-right: 10px;">
                                                    <strong>Tag No Location</strong>
                                                </span>
                                            </td>
                                            <td style=" width: 20%;">
                                                <span t-field="o.tag_no_location"/>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td style="width: 30%; background-color: lightblue;">
                                                <span style=" margin-bottom: 10px; margin-right: 10px;">
                                                    <strong>Project Name</strong>
                                                </span>
                                            </td>
                                            <td style="width: 20%;">
                                                <span t-field="o.project_name_title"/>
                                            </td>

                                            <td style="width: 30%; background-color: lightblue;">
                                                <span style="display: block; margin-bottom: 10px; margin-right: 10px;">
                                                    <strong>Project Number</strong>
                                                </span>
                                            </td>
                                            <td style="width: 20%;">
                                                <span t-field="o.project_number"/>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td style=" width: 30%; background-color: lightblue;">
                                                <span style="margin-bottom: 10px; margin-right: 10px;">
                                                    <strong>NCR Initiator</strong>
                                                </span>
                                            </td>
                                            <td style="width: 20%;">
                                                <span t-field="o.ncr_initiator_id"/>
                                            </td>

                                            <td style="width: 30%; background-color: lightblue;">
                                                <span style="margin-bottom: 10px; margin-right: 10px;">
                                                    <strong>Initiator Job Title</strong>
                                                </span>
                                            </td>
                                            <td style="width: 20%;">
                                                <span t-field="o.initiator_job_title"/>
                                            </td>
                                        </tr>
                                        <tr t-if="o.ncr_type_id.name in ['Supplier', 'Customer Site Compliant']">
                                            <td style=" width: 30%; background-color: lightblue;">
                                                <span style="margin-bottom: 10px; margin-right: 10px;">
                                                    <strong>Discipline</strong>
                                                </span>
                                            </td>
                                            <td style="width: 20%;">
                                                <span t-field="o.discipline_id"/>
                                            </td>

                                            <td style=" width: 30%; background-color: lightblue;">
                                                <span style="margin-bottom: 10px; margin-right: 10px;">
                                                    <strong>Supplier Name</strong>
                                                </span>
                                            </td>
                                            <td style="border: 1px solid black; width: 20%;">
                                                <span t-field="o.supplier_name_id"/>
                                            </td>
                                        </tr>
                                        <tr t-if="o.ncr_type_id.name in ['Supplier', 'Customer Site Compliant']">
                                            <td style=" width: 30%; background-color: lightblue;">
                                                <span style="margin-bottom: 10px; margin-right: 10px; ">
                                                    <strong>Purchase Order No</strong>
                                                </span>
                                            </td>
                                            <td style="border: 1px solid black; width: 20%;">
                                                <span t-field="o.purchase_order_no"/>
                                            </td>

                                            <td style=" width: 30%; background-color: lightblue;">
                                                <span style="margin-bottom: 10px; margin-right: 10px;">
                                                    <strong>Shipment Reference</strong>
                                                </span>
                                            </td>
                                            <td style="border: 1px solid black; width: 20%;">
                                                <span t-field="o.shipment_reference"/>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td style=" width: 30%; background-color: lightblue;">
                                                <span style="margin-bottom: 10px; margin-right: 10px;">
                                                    <strong>RFI Number</strong>
                                                </span>
                                            </td>
                                            <td style="border: 1px solid black; width: 20%;">
                                                <span t-field="o.rfi_number"/>
                                            </td>

                                            <td style=" width: 30%; background-color: lightblue;">
                                                <span style="margin-bottom: 10px; margin-right: 10px;">
                                                    <strong>Inspection Stage</strong>
                                                </span>
                                            </td>
                                            <td style="border: 1px solid black; width: 20%;">
                                                <span t-field="o.inspection_stage"/>
                                            </td>
                                        </tr>
                                        <tr t-if="o.ncr_type_id.name in ['Supplier', 'Customer Site Compliant']">
                                            <td style="width: 30%; background-color: lightblue;">
                                                <span style="margin-bottom: 10px; margin-right: 10px;">
                                                    <strong>Received Date</strong>
                                                </span>
                                            </td>
                                            <td style="width: 20%;">
                                                <span t-field="o.received_date"/>
                                            </td>
                                            <td style="width: 30%; background-color: lightblue;">
                                                <span style="margin-bottom: 10px; margin-right: 10px;">
                                                    <strong>NCR Open Date</strong>
                                                </span>
                                            </td>
                                            <td style="border: 1px solid black; width: 20%;">
                                                <span t-field="o.ncr_open_date"/>
                                            </td>
                                        </tr>
                                    </table>
                                    <td>
                                        <table class="table table-condensed"
                                               style="border: 1px solid black !important; margin-bottom: 30px; margin-top: 30px; text-align: center;">
                                            <thead>
                                                <tr style="background-color: lightblue;">
                                                    <td>
                                                        <strong>NC S</strong>
                                                    </td>
                                                    <td>
                                                        <strong>Source of NC</strong>
                                                    </td>
                                                    <td>
                                                        <strong>NC Description</strong>
                                                    </td>
                                                    <td>
                                                        <strong>UOM</strong>
                                                    </td>
                                                    <td>
                                                        <strong>Quantity</strong>
                                                    </td>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <t t-foreach="o.ncr_nc_ids" t-as="nc">
                                                    <tr>
                                                        <td>
                                                            <span t-field="nc.nc_s"/>
                                                        </td>
                                                        <td>
                                                            <span t-field="nc.source_of_nc"/>
                                                        </td>
                                                        <td>
                                                            <span t-field="nc.nc_description"/>
                                                        </td>
                                                        <td>
                                                            <span t-field="nc.uom"/>
                                                        </td>
                                                        <td>
                                                            <span t-field="nc.quantity"/>
                                                        </td>
                                                    </tr>
                                                </t>
                                            </tbody>
                                        </table>
                                    </td>
                                    <table class="table table-condensed"
                                           style="border: 1px solid black !important; margin-bottom: 30px; margin-top: 30px;">
                                        <tr>
                                            <td style="width: 30%; background-color: lightblue;">
                                                <span style="margin-bottom: 10px; margin-right: 10px;">
                                                    <strong>NCR Approver</strong>
                                                </span>
                                            </td>
                                            <td style="width: 20%;">
                                                <span t-field="o.ncr_approver_id"/>
                                            </td>
                                            <td style=" width: 30%; background-color: lightblue;">
                                                <span style="margin-bottom: 10px; margin-right: 10px;">
                                                    <strong>Approver Job Title</strong>
                                                </span>
                                            </td>
                                            <td style="width: 20%;">
                                                <span t-field="o.approver_job_title"/>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td style=" width: 30%; background-color: lightblue;">
                                                <span style="margin-right: 10px;">
                                                    <strong>RCA Response Due Date</strong>
                                                </span>
                                            </td>
                                            <td style="border: 1px solid black; width: 20%;">
                                                <span t-field="o.rca_response_due_date"/>
                                            </td>
                                            <td style=" background-color: lightblue;">
                                                <span style="margin-right: 10px;">
                                                    <strong>NCR Category</strong>
                                                </span>
                                            </td>
                                            <td style="border: 1px solid black; width: 20%;">
                                                <span t-field="o.ncr_category_id"/>
                                            </td>
                                        </tr>
                                    </table>
                                </td>
                            </tr>
                        </div>
                    </div>
                </div>
            </t>
        </t>
    </template>
    <template id="report_ncr_response_report">
        <t t-foreach="docs" t-as="o">
            <t t-call="web.basic_layout">
                <t t-set="company" t-value="o.company_id"/>
                <div class="header" style="border-bottom: 1px solid black;">
                    <div>
                        <div class="col-4">
                            <img t-if="company.logo" t-att-src="image_data_uri(company.logo)" style="max-height: 45px;"
                                 alt="Logo"/>
                        </div>
                        <address class="mb-0" t-field="company.partner_id"
                                 t-options='{"widget": "contact", "fields": ["address", "name"], "no_marker": True}'/>
                    </div>
                </div>
                <div class="page">
                    <div class="oe_structure"/>
                    <div class="row">
                        <div class="col-xs-8">
                            <tr>
                                <td width="10%">
                                    <p style="text-align:center;padding-top:10px;">
                                    </p>
                                </td>
                                <td>
                                    <table class=" table-borderless">
                                        <tr>
                                            <td colspan="3" class="text-center">
                                                <span style="font-size: 30px; font-weight: bold; display: block; margin-bottom: 20px; margin-right: 40px;"
                                                      t-field="o.name"/>
                                            </td>
                                            <td style="width: 47%;">
                                            </td>
                                            <td>
                                                <span style="font-size: 30px; font-weight: bold; display: block; margin-bottom: 10px; margin-right: 40px;">
                                                    <strong>Status</strong>
                                                </span>
                                            </td>
                                            <td>
                                                <span t-field="o.state" style="font-size: 25px;"/>
                                            </td>
                                        </tr>
                                    </table>
                                    <table class="table table-condensed"
                                           style="border: 1px solid black !important; margin-bottom: 30px; margin-top: 30px;">
                                        <tr>
                                            <td style="width: 20%; background-color: lightblue;">
                                                <span style=" margin-bottom: 10px; margin-right: 40px; font-weight: bold;">
                                                    <strong>NCR Type</strong>
                                                </span>
                                            </td>
                                            <td style="width: 30%;">
                                                <span t-field="o.ncr_type_id"/>
                                            </td>

                                            <td style="width: 20%; background-color: lightblue;">
                                                <span style="margin-bottom: 10px; margin-right: 40px; font-weight: bold;">
                                                    <strong>NCR No.</strong>
                                                </span>
                                            </td>
                                            <td style="width: 30%;">
                                                <span t-field="o.ncr_id"/>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td style="width: 20%; background-color: lightblue;">
                                                <span style=" margin-bottom: 10px; margin-right: 40px; font-weight: bold;">
                                                    <strong>Project Number</strong>
                                                </span>
                                            </td>
                                            <td style="width: 30%;">
                                                <span t-field="o.project_number"/>
                                            </td>

                                            <td style="width: 20%; background-color: lightblue;">
                                                <span style=" margin-bottom: 10px; margin-right: 40px; font-weight: bold;">
                                                    <strong>Project Name</strong>
                                                </span>
                                            </td>
                                            <td style="width: 30%;">
                                                <span t-field="o.project_name_title"/>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td style="width: 20%; background-color: lightblue;">
                                                <span style=" margin-bottom: 5px; margin-right: 40px; font-weight: bold;">
                                                    <strong>Prepared By</strong>
                                                </span>
                                            </td>
                                            <td style="width: 30%;">
                                                <span t-field="o.prepared_by_id"/>
                                            </td>
                                            <td style="width: 20%; background-color: lightblue; font-weight: bold;">
                                                <span style=" margin-bottom: 5px; margin-right: 40px;">
                                                    <strong>Prepared By Signature Date</strong>
                                                </span>
                                            </td>
                                            <td style="width: 30%;">
                                                <span t-field="o.prepared_by_signature_date"/>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td style="width: 20%; background-color: lightblue; font-weight: bold;">
                                                <span style=" margin-bottom: 5px; margin-right: 40px;">
                                                    <strong>Reviewed &amp; Approved By</strong>
                                                </span>
                                            </td>
                                            <td style="width: 30%;">
                                                <span t-field="o.reviewed_and_approved_by_id"/>
                                            </td>

                                            <td style="width: 20%; background-color: lightblue; font-weight: bold;">
                                                <span style=" margin-bottom: 5px; margin-right: 40px;">
                                                    <strong>Reviewed By Signature Date</strong>
                                                </span>
                                            </td>
                                            <td style="width: 30%;">
                                                <span t-field="o.reviewed_by_signature_date"/>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td style="width: 20%; background-color: lightblue; font-weight: bold;">
                                                <span style=" margin-bottom: 5px; margin-right: 40px;">
                                                    <strong>Title (Prepared By)</strong>
                                                </span>
                                            </td>
                                            <td style="width: 30%;">
                                                <span t-field="o.prepared_by_title"/>
                                            </td>

                                            <td style="width: 20%; background-color: lightblue; font-weight: bold;">
                                                <span style="margin-bottom: 5px; margin-right: 40px;">
                                                    <strong>Title (Reviewed &amp; Approved By)</strong>
                                                </span>
                                            </td>
                                            <td style="width: 30%;">
                                                <span t-field="o.reviewed_by_title"/>
                                            </td>
                                            <tr>
                                                <td style="width: 20%; background-color: lightblue; font-weight: bold;">
                                                    <span style="margin-bottom: 20px; margin-right: 40px;">
                                                        <strong>Supplier Response</strong>
                                                    </span>
                                                </td>
                                                <td style="width: 30%;" colspan="99">
                                                    <span t-field="o.supplier_response"/>
                                                </td>
                                            </tr>
                                        </tr>
                                    </table>
                                    <t t-foreach="o.ncr_nc_ids" t-as="nc">
                                        <tr>
                                            <td>
                                                <table class="table-borderless">
                                                    <tr>
                                                        <td>
                                                            <span t-esc="str(nc_index + 1 ) + '.'"
                                                                  style="font-size: 20px; font-weight: bold; margin-bottom: 20px; margin-right: 5px;">
                                                            </span>
                                                        </td>
                                                        <td style="font-size: 20px; margin-bottom: 20px; margin-right: 10px;">
                                                            <span t-field="nc.nc_s">
                                                            </span>
                                                        </td>
                                                    </tr>
                                                </table>
                                            </td>
                                        </tr>
                                        <td>
                                            <table class="table table-condensed"
                                                   style="border: 1px solid black !important; margin-bottom: 30px; margin-top: 30px;">
                                                <tr>
                                                    <td style="background-color: lightblue; width: 20%;">
                                                        <strong>Source of NC</strong>
                                                    </td>
                                                    <td>
                                                        <span t-field="nc.source_of_nc"/>
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td style=" background-color: lightblue; width: 20%;">
                                                        <strong>NC Description</strong>
                                                    </td>
                                                    <td>
                                                        <span t-field="nc.nc_description"/>
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td style="background-color: lightblue; width: 20%;">
                                                        <strong>UOM</strong>
                                                    </td>
                                                    <td>
                                                        <span t-field="nc.uom"/>
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td style="background-color: lightblue; width: 20%;">
                                                        <strong>Quantity</strong>
                                                    </td>
                                                    <td>
                                                        <span t-field="nc.quantity"/>
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td style="background-color: lightblue; width: 20%;">
                                                        <strong>Cause of NC ID</strong>
                                                    </td>
                                                    <td>
                                                        <span t-field="nc.cause_of_nc_id"/>
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td style="background-color: lightblue; width: 20%;">
                                                        <strong>Disposition Type ID</strong>
                                                    </td>
                                                    <td>
                                                        <span t-field="nc.disposition_type_id"/>
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td style="background-color: lightblue; width: 20%;">
                                                        <strong>Immediate Action</strong>
                                                    </td>
                                                    <td>
                                                        <span t-field="nc.immediate_action"/>
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td style="background-color: lightblue; width: 20%;">
                                                        <strong>Proposed Due Date</strong>
                                                    </td>
                                                    <td>
                                                        <span t-field="nc.proposed_due_date"/>
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td style="background-color: lightblue; width: 20%;">
                                                        <strong>Review Comments</strong>
                                                    </td>
                                                    <td>
                                                        <span t-field="nc.review_comments"/>
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td style="background-color: lightblue; width: 20%;">
                                                        <strong>CA Response ID</strong>
                                                    </td>
                                                    <td>
                                                        <span t-field="nc.ca_response_id"/>
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td style="background-color: lightblue; width: 20%;">
                                                        <strong>RCA Response</strong>
                                                    </td>
                                                    <td>
                                                        <span t-field="nc.rca_response"/>
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td style="background-color: lightblue; width: 20%;">
                                                        <strong>Disposition Action</strong>
                                                    </td>
                                                    <td>
                                                        <span t-field="nc.disposition_action"/>
                                                    </td>
                                                </tr>
                                            </table>
                                        </td>
                                    </t>
                                    <t t-if="o.state not in ('new')">
                                        <table class="table table-condensed"
                                               style="border: 1px solid black !important; margin-bottom: 30px; margin-top: 30px;">
                                            <tr>
                                                <td style="margin-bottom: 10px; margin-right: 40px; width: 20%; background-color: lightblue;">
                                                    <span>
                                                        <strong>Total Cost for Rework</strong>
                                                    </span>
                                                </td>
                                                <td style="width: 30%;">
                                                    <span t-field="o.total_cost_for_rework"/>
                                                </td>
                                                <td style="margin-bottom: 10px; margin-right: 40px; width: 20%; background-color: lightblue;">
                                                    <span>
                                                        <strong>Total Backcharge Amount</strong>
                                                    </span>
                                                </td>
                                                <td style="width: 30%;">
                                                    <span t-field="o.total_backcharge_amount"/>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td style="margin-bottom: 10px; margin-right: 40px; width: 20%; background-color: lightblue;">
                                                    <span>
                                                        <strong>NCR Completion Status</strong>
                                                    </span>
                                                </td>
                                                <td style="width: 30%;">
                                                    <span t-field="o.ncr_completion_status"/>
                                                </td>
                                                <td style="margin-bottom: 10px; margin-right: 40px; width: 20%; background-color: lightblue;">
                                                    <span>
                                                        <strong>RCA Approver</strong>
                                                    </span>
                                                </td>

                                                <td style="width: 30%;">
                                                    <span t-field="o.rca_approver_id"/>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td style="margin-bottom: 10px; margin-right: 40px; width: 20%; background-color: lightblue;">
                                                    <span>
                                                        <strong>NCR Closed Date</strong>
                                                    </span>
                                                </td>
                                                <td style="width: 30%;">
                                                    <span t-field="o.ncr_closed_date"/>
                                                </td>

                                                <td style="margin-bottom: 10px; margin-right: 40px; width: 20%; background-color: lightblue;">
                                                    <span>
                                                        <strong>Title (RCA Approver)</strong>
                                                    </span>
                                                </td>
                                                <td style="width: 30%;">
                                                    <span t-field="o.title"/>
                                                </td>
                                            </tr>
                                        </table>
                                    </t>
                                </td>
                            </tr>
                        </div>
                    </div>
                </div>
            </t>
        </t>
    </template>
</odoo>
